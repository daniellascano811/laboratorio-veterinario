<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Solicitudes</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<header class="navbar">
  <div class="navbar-inner">
    <div class="brand">
      <img src="{{ url_for('static', filename='img/logo-a3.png') }}" alt="Logo A3">
      <div class="brand-title">
        <strong>A3 Laboratorio Veterinario</strong>
        <span>Solicitud de recogida de muestras</span>
      </div>
    </div>

    <nav class="nav">
      <a class="nav-btn {{ 'active' if active=='form' else '' }}" href="{{ url_for('home') }}">Nueva solicitud</a>
      <a class="nav-btn {{ 'active' if active=='solicitudes' else '' }}" href="{{ url_for('ver_solicitudes') }}">Ver solicitudes</a>
      <a class="nav-btn" href="{{ url_for('logout') }}">Logout</a>
    </nav>
  </div>
</header>

<main class="container">
  <div class="page-head">
    <h1>Solicitudes (últimas 50)</h1>
    <p class="muted">Vista interna (requiere login).</p>
  </div>

  <div class="table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th class="col-id">ID</th>
          <th class="col-zona">Zona</th>
          <th class="col-dueno">Dueño</th>
          <th class="col-tel">Tel</th>
          <th class="col-mascota">Mascota</th>
          <th class="col-muestra">Muestra</th>
          <th class="col-cual">¿Cuál?</th>
          <th class="col-dir">Dirección</th>
          <th class="col-fecha">Fecha</th>
          <th class="col-hora">Horario</th>
          <th class="col-estado">Estado</th>
          <th class="col-creado">Creado</th>
        </tr>
      </thead>

      <tbody>
        {% for s in solicitudes %}
        {% set estado = (s.estado or 'pendiente')|lower %}
        <tr>
          <td class="mono">{{ s.id }}</td>
          <td>{{ s.zona }}</td>
          <td class="cell-wrap">{{ s.dueno }}</td>
          <td class="mono">{{ s.tel }}</td>
          <td class="cell-wrap">{{ s.mascota }}</td>
          <td>{{ s.muestra }}</td>
          <td class="cell-wrap">{{ s.cual }}</td>
          <td class="cell-wrap">{{ s.direccion }}</td>
          <td class="mono">{{ s.fecha }}</td>
          <td class="cell-wrap">{{ s.horario }}</td>
          <td>
            <span class="badge
              {% if 'pend' in estado %} badge-pendiente
              {% elif 'proce' in estado or 'curso' in estado %} badge-proceso
              {% elif 'comp' in estado or 'list' in estado %} badge-completado
              {% else %} badge-pendiente {% endif %}">
              {{ s.estado }}
            </span>
          </td>
          <td class="mono">{{ s.creado }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</main>

</body>
</html>
