<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nueva solicitud de muestra</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<header class="navbar">
  <div class="navbar-inner">
    <div class="brand">
      <img src="{{ url_for('static', filename='img/logo-a3.png') }}" alt="Logo A3">
      <div class="brand-title">
        <strong>A3 Laboratorio Veterinario</strong>
        <span>Solicitud de recogida de muestras</span>
      </div>
    </div>

    <nav class="nav">
      <a class="nav-btn active" href="{{ url_for('home') }}">
        Nueva solicitud
      </a>
      <a class="nav-btn" href="{{ url_for('ver_solicitudes') }}">
        Ver solicitudes
      </a>
    </nav>
  </div>
</header>

<main class="container">
  <!-- JERARQU√çA CLARA -->
  <h1>Nueva solicitud de muestra</h1>
  <p class="subtitle">
    Completa los datos del due√±o y de la mascota para coordinar la recogida
  </p>

  <section class="card">
    <form class="grid grid-vertical" method="POST" action="{{ url_for('crear_solicitud') }}">

      <!-- ================== DATOS DEL DUE√ëO ================== -->
      <div class="section-title">Datos del due√±o</div>

      <label>Nombre del due√±o
        <input name="dueno_nombre" placeholder="Nombre y apellido" required>
      </label>

      <label>Tel√©fono
        <input name="dueno_telefono" placeholder="Ej: 3001234567" required>
      </label>

      <label>Tipo de vivienda
        <select name="vivienda_tipo" required>
          <option value="" selected disabled>Selecciona</option>
          <option value="casa">Casa</option>
          <option value="apartamento">Apartamento</option>
        </select>
      </label>

      <label>Direcci√≥n
        <input name="direccion" placeholder="Calle / Carrera / N√∫mero" required>
      </label>

      <div class="row-2">
        <label>Torre (si aplica)
          <input name="torre" placeholder="Ej: Torre 3">
        </label>

        <label>Apartamento (si aplica)
          <input name="apto" placeholder="Ej: 1204">
        </label>
      </div>

      <label>Instrucciones adicionales
        <input name="direccion_detalle" placeholder="Porter√≠a, c√≥digo, referencias‚Ä¶">
      </label>

      <div class="row-2">
        <label>Turno
          <select name="horario_turno" required>
            <option value="" selected disabled>Selecciona</option>
            <option value="ma√±ana">Ma√±ana</option>
            <option value="tarde">Tarde</option>
          </select>
        </label>

        <label>Rango horario
          <select name="horario_rango" required>
            <option value="" selected disabled>Selecciona</option>
            <option value="9:00 - 12:00">9:00 ‚Äì 12:00</option>
            <option value="13:00 - 17:00">13:00 ‚Äì 17:00</option>
          </select>
        </label>
      </div>

      <label>Fecha de recogida (opcional)
        <input type="date" name="fecha">
      </label>

      <!-- ================== DATOS DE LA MASCOTA ================== -->
      <div class="section-title">Datos de la mascota</div>

      <label>Nombre de la mascota
        <input name="mascota_nombre" required>
      </label>

      <label>Especie
        <select name="mascota_especie" id="mascota_especie" required>
          <option value="" selected disabled>Selecciona</option>
          <option value="perro">üê∂ Perro</option>
          <option value="gato">üê± Gato</option>
          <option value="otro">üêæ Otro</option>
        </select>
      </label>

      <label id="mascota_otro_wrap" class="hidden">¬øCu√°l?
        <input name="mascota_otro" id="mascota_otro" placeholder="Especifica la mascota">
      </label>

      <label>Raza
        <input name="mascota_raza" placeholder="Ej: Criollo, Bulldog‚Ä¶">
      </label>

      <label>Edad
        <input name="mascota_edad" placeholder="Ej: 2 a√±os / 6 meses">
      </label>

      <!-- ================== MUESTRA ================== -->
      <div class="section-title">Muestra</div>

      <label>Tipo de muestra
        <select name="muestra_tipo" id="muestra_tipo" required>
          <option value="" selected disabled>Selecciona</option>
          <option value="sangre">Sangre</option>
          <option value="heces">Heces</option>
          <option value="orina">Orina</option>
          <option value="otro">Otro</option>
        </select>
      </label>

      <label id="muestra_otro_wrap" class="hidden">¬øCu√°l?
        <input name="muestra_otro" id="muestra_otro" placeholder="Describe la muestra">
      </label>

      <label>Condici√≥n especial
        <input name="muestra_condicion" placeholder="Refrigerada, hielo, tiempo m√°ximo‚Ä¶">
      </label>

      <button class="btn-primary" type="submit">
        Enviar solicitud
      </button>
    </form>
  </section>
</main>

<script>
  const especie = document.getElementById("mascota_especie");
  const mascotaOtroWrap = document.getElementById("mascota_otro_wrap");
  const mascotaOtro = document.getElementById("mascota_otro");

  function toggleMascotaOtro(){
    if (especie.value === "otro") {
      mascotaOtroWrap.classList.remove("hidden");
      mascotaOtro.required = true;
    } else {
      mascotaOtroWrap.classList.add("hidden");
      mascotaOtro.required = false;
      mascotaOtro.value = "";
    }
  }
  especie.addEventListener("change", toggleMascotaOtro);
  toggleMascotaOtro();

  const muestra = document.getElementById("muestra_tipo");
  const muestraOtroWrap = document.getElementById("muestra_otro_wrap");
  const muestraOtro = document.getElementById("muestra_otro");

  function toggleMuestraOtro(){
    if (muestra.value === "otro") {
      muestraOtroWrap.classList.remove("hidden");
      muestraOtro.required = true;
    } else {
      muestraOtroWrap.classList.add("hidden");
      muestraOtro.required = false;
      muestraOtro.value = "";
    }
  }
  muestra.addEventListener("change", toggleMuestraOtro);
  toggleMuestraOtro();
</script>

</body>
</html>
