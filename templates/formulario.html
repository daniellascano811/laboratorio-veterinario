<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nueva solicitud</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<header class="navbar">
  <div class="navbar-inner">
    <div class="brand">
      <img src="{{ url_for('static', filename='img/logo-a3.png') }}" alt="Logo A3">
      <div class="brand-title">
        <strong>A3 Laboratorio Veterinario</strong>
        <span>Solicitud de recogida de muestras</span>
      </div>
    </div>

    <nav class="nav">
      <a class="nav-btn {{ 'active' if active=='form' else '' }}" href="{{ url_for('home') }}">Nueva solicitud</a>
      <a class="nav-btn {{ 'active' if active=='solicitudes' else '' }}" href="{{ url_for('ver_solicitudes') }}">Ver solicitudes</a>
      {% if session.get('logged_in') %}
        <a class="nav-btn" href="{{ url_for('logout') }}">Logout</a>
      {% else %}
        <a class="nav-btn {{ 'active' if active=='login' else '' }}" href="{{ url_for('login') }}">Login</a>
      {% endif %}
    </nav>
  </div>
</header>

<main class="container">
  <h1>Nueva solicitud</h1>

  <section class="card">
    <form class="grid" method="POST" action="{{ url_for('crear_solicitud') }}">

      <label>Zona
        <input name="zona" placeholder="Ej: Norte" required>
      </label>

      <label>Dueño
        <input name="dueno" placeholder="Nombre y apellido" required>
      </label>

      <label>Teléfono
        <input name="tel" inputmode="numeric" placeholder="Ej: 3001234567" required>
      </label>

      <label>Mascota
        <input name="mascota" placeholder="Nombre de la mascota">
      </label>

      <label>Muestra
        <select name="muestra_tipo" id="muestra_tipo" class="select">
          <option value="Orina">Orina</option>
          <option value="Heces">Heces</option>
          <option value="Sangre">Sangre</option>
          <option value="Otro">Otro</option>
        </select>
      </label>

      <label id="muestra_otro_wrap" class="hidden">¿Cuál?
        <input name="muestra_otro" placeholder="Describe la muestra">
      </label>

      <label>Dirección
        <input name="direccion" placeholder="Ej: Calle 97 #70-89">
      </label>

      <label>Fecha
        <input type="date" name="fecha">
      </label>

      <label>Horario
        <input name="horario" placeholder="Ej: Mañana (8:00 - 10:00)">
      </label>

      <button class="btn-primary" type="submit">Enviar solicitud</button>
    </form>
  </section>
</main>

<script>
  const tipo = document.getElementById("muestra_tipo");
  const wrap = document.getElementById("muestra_otro_wrap");
  function toggleOtro(){
    if(tipo.value === "Otro"){
      wrap.classList.remove("hidden");
    } else {
      wrap.classList.add("hidden");
      const input = wrap.querySelector("input");
      if(input) input.value = "";
    }
  }
  tipo.addEventListener("change", toggleOtro);
  toggleOtro();
</script>

</body>
</html>
